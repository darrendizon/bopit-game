<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Type It Challenge</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Type It Challenge</h1>
        <p>A fast-paced, audio-first typing game.</p>
    </header>

    <main id="game-container" aria-label="Game Area">
        <!-- Live Regions -->
        <div id="live-regions" class="visually-hidden">
            <div id="command" aria-live="assertive" aria-atomic="true"></div>
            <div id="status" aria-live="polite" aria-atomic="true"></div>
            <div id="score-announcement" aria-live="polite" aria-atomic="true"></div>
        </div>

        <!-- Visual Display -->
        <div id="visual-display" aria-hidden="true">
            <div id="visual-command">Press Start to Play</div>
            <div id="visual-score">Score: 0</div>
            <div id="visual-status"></div>
        </div>

        <!-- Controls -->
        <div id="controls">
            <button id="start-btn">Start Game</button>
            <button id="pause-btn" disabled>Pause Game</button>
            <button id="settings-btn" aria-haspopup="dialog">Settings</button>
            <button id="help-btn" aria-haspopup="dialog">Help / Instructions</button>
        </div>
    </main>

    <!-- Settings Modal -->
    <dialog id="settings-modal" aria-labelledby="settings-title">
        <h2 id="settings-title">Settings</h2>
        <form id="settings-form" method="dialog">
            <fieldset>
                <legend>Visual & Audio</legend>
                <label for="color-scheme">Color Scheme</label>
                <select id="color-scheme">
                    <option value="dark">Dark (Default)</option>
                    <option value="light">Light</option>
                    <option value="high-contrast">High Contrast</option>
                </select>

                <label for="volume-slider">Master Volume</label>
                <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="1">

                <label for="speech-rate">Speech Rate</label>
                <input type="range" id="speech-rate" min="0.5" max="2" step="0.1" value="1">

                <label for="speech-pitch">Speech Pitch</label>
                <input type="range" id="speech-pitch" min="0.5" max="2" step="0.1" value="1">

                <label for="voice-select">Voice</label>
                <select id="voice-select"></select>
            </fieldset>

            <fieldset>
                <legend>Game Settings</legend>
                <label for="lesson-select">Lesson</label>
                <select id="lesson-select">
                    <option value="home-row">Home Row</option>
                    <option value="top-row">Top Row</option>
                    <option value="bottom-row">Bottom Row</option>
                    <option value="numbers">Numbers</option>
                    <option value="all">All Keys</option>
                </select>
            </fieldset>

            <fieldset>
                <legend>Key Mappings</legend>
                <div class="key-map-row">
                    <label for="key-repeat">Repeat It</label>
                    <input type="text" id="key-repeat" value="r" readonly>
                    <button type="button" class="change-key-btn" data-action="repeat">Change</button>
                </div>
                <div class="key-map-row">
                    <label for="key-pause">Pause / Resume</label>
                    <input type="text" id="key-pause" value="Escape" readonly>
                    <button type="button" class="change-key-btn" data-action="pause">Change</button>
                </div>
                <div class="key-map-row">
                    <label for="key-start">Start / Restart</label>
                    <input type="text" id="key-start" value="Enter" readonly>
                    <button type="button" class="change-key-btn" data-action="start">Change</button>
                </div>
            </fieldset>

            <div class="modal-actions">
                <button type="button" id="save-settings">Save & Close</button>
                <button type="button" id="cancel-settings">Cancel</button>
            </div>
        </form>
    </dialog>

    <!-- Help Modal -->
    <dialog id="help-modal" aria-labelledby="help-title">
        <h2 id="help-title">How to Play</h2>
        <div id="help-content">
            <p>Listen to the commands and react quickly!</p>
            <ul>
                <li><strong>Type It:</strong> Type the letter or number announced.</li>
            </ul>
            <p>The game gets faster as you progress. Use <strong>Escape</strong> to pause or quit. Use Settings to change the lesson or color scheme.</p>
        </div>
        <button id="close-help">Close</button>
    </dialog>

    <script type="module" src="src/main.js"></script>
</body>
</html>
